//---------------------TAC LS------------------------
@PART[KKAOSS_Greenhouse_g]:FOR[PlanetarySurfaceStructures]:NEEDS[TacLifeSupport]
{
	MODULE
	{
		name = PlanetaryGreenhouse
		ConverterName = Cultivation
		StartActionName = Start Farming
		StopActionName = Stop Farming
		AutoShutdown = false
		GeneratesHeat = false
		 
		INPUT_RESOURCE
		{
			ResourceName = CarbonDioxide
			Ratio =  0.013625680517864
		}
        INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio =  0.000032646100092
		}
        INPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio =  0.0002762500000000272
		}
        INPUT_RESOURCE
		{
			ResourceName = Organics
			Ratio =  0.0000552499999728
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.81
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Food
			Ratio =  0.0002762500000000272
			DumpExcess = false
		}
        OUTPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio =  0.01370830049908
			DumpExcess = true
		}
	}
    
    RESOURCE
	{
		name = Organics
		amount = 1193.39999941248
		maxAmount = 1193.39999941248
	}
	RESOURCE
	{
		name = Waste
		amount = 0
		maxAmount = 33.25
	}
}

@PART[KKAOSS_Habitat_MK2_g]:FOR[PlanetarySurfaceStructures]:NEEDS[TacLifeSupport]:AFTER[TacLifeSupport]
{
    !RESOURCE[Food]{}
    !RESOURCE[Water]{}
    !RESOURCE[Oxygen]{}
    !RESOURCE[CarbonDioxide]{}
    !RESOURCE[Waste]{}
    !RESOURCE[WasteWater]{}
    RESOURCE
    {
        name = Food
        amount = 6.582
        maxAmount = 6.582
    }
    RESOURCE
    {
        name = Water
        amount = 4.35
        maxAmount = 4.35
    }
    RESOURCE
    {
        name = Oxygen
        amount = 6662.28
        maxAmount = 6662.28
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 575.478
    }
    RESOURCE
    {
        name = Waste
        amount = 0
        maxAmount = 0.6
    }
    RESOURCE
    {
        name = WasteWater
        amount = 0
        maxAmount = 5.544
    }
}
@PART[KKAOSS_Habitat_MK1_g]:FOR[PlanetarySurfaceStructures]:NEEDS[TacLifeSupport]:AFTER[TacLifeSupport]
{
    !RESOURCE[Food]{}
    !RESOURCE[Water]{}
    !RESOURCE[Oxygen]{}
    !RESOURCE[CarbonDioxide]{}
    !RESOURCE[Waste]{}
    !RESOURCE[WasteWater]{}
    RESOURCE
    {
        name = Food
        amount = 4.388
        maxAmount = 4.388
    }
    RESOURCE
    {
        name = Water
        amount = 2.9
        maxAmount = 2.9
    }
    RESOURCE
    {
        name = Oxygen
        amount = 444.152
        maxAmount = 444.152
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 383.652
    }
    RESOURCE
    {
        name = Waste
        amount = 0
        maxAmount = 0.4
    }
    RESOURCE
    {
        name = WasteWater
        amount = 0
        maxAmount = 3.696
    }
}

@PART[KKAOSS_Fuelcell_Tank]:FOR[PlanetarySurfaceStructures]:NEEDS[TacLifeSupport]
{
    !MODULE[ModuleResourceConverter]{}

    MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell
		StartActionName = Start Fuel Cell
		StopActionName = Stop Fuel Cell
		FillAmount = 0.95
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false

		 
		INPUT_RESOURCE
		{
			ResourceName = LiquidFuel
			Ratio = 0.02025
			FlowMode = STAGE_PRIORITY_FLOW
  		}
		INPUT_RESOURCE
		{
			ResourceName = Oxidizer
			Ratio = 0.02475
			FlowMode = STAGE_PRIORITY_FLOW
		}
        OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 18
			DumpExcess = false
		}
        OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.00005
			DumpExcess = true
		}
	}
}

//---------------------USI LS------------------------
@PART[KKAOSS_Greenhouse_g]:FOR[PlanetarySurfaceStructures]:NEEDS[USILifeSupport]
{
	MODULE
	{
		name = PlanetaryGreenhouse
		ConverterName = Cultivation
		StartActionName = Start Farming
		StopActionName = Stop Farming
		AutoShutdown = false
		GeneratesHeat = false
        fertilizerBenefit = 1.6
        boosterName = Fertilizer
        boostedOutputName = Supplies
		 
		INPUT_RESOURCE
		{
			ResourceName = Mulch
			Ratio =  0.0003
		}
        INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio =  0.00006

		}
		OUTPUT_RESOURCE
		{
			ResourceName = Supplies
			Ratio = 0.000225
			DumpExcess = False
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1
		}
	}

    RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 400
	}
	RESOURCE
	{
		name = Supplies
		amount = 400
		maxAmount = 400
	}
	RESOURCE
	{
		name = Fertilizer
		amount = 400
		maxAmount = 400
	}
}

@PART[KKAOSS_Habitat_MK2_g]:FOR[PlanetarySurfaceStructures]:NEEDS[USILifeSupport]
{
    RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 100
	}
	RESOURCE
	{
		name = Supplies
		amount = 200
		maxAmount = 200
	}
}
@PART[KKAOSS_Habitat_MK1_g]:FOR[PlanetarySurfaceStructures]:NEEDS[USILifeSupport]
{
    RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 75
	}
	RESOURCE
	{
		name = Supplies
		amount = 160
		maxAmount = 160
	}
}

//---------------------IONCROSS CREW SUPPORT------------------------
@PART[KKAOSS_Control_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 1700
		maxAmount = 1700
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 400
    }
}
@PART[KKAOSS_Cupola_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 850
		maxAmount = 850
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 200
    }
}
@PART[KKAOSS_Science_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 1700
		maxAmount = 1700
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 400
    }
}
@PART[KKAOSS_gangway_airlock]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 425
		maxAmount = 425
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 100
    }
}
@PART[KKAOSS_Greenhouse_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
	MODULE
	{
		name = PlanetaryGreenhouse
		ConverterName = Cultivation
		StartActionName = Start Farming
		StopActionName = Stop Farming
		AutoShutdown = false
		GeneratesHeat = false
		 

		 INPUT_RESOURCE
		 {
			ResourceName = ElectricCharge
			Ratio = 1
		 }
         INPUT_RESOURCE
		 {
			ResourceName = CarbonDioxide
			Ratio = 3.0
		 }
		 OUTPUT_RESOURCE
		 {
			ResourceName = Oxygen
			Ratio = 2.4
			DumpExcess = false
		 }
	}

    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 8500
		maxAmount = 8500
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 1600
    }
}
@PART[KKAOSS_Habitat_MK2_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 8500
		maxAmount = 8500
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 1000
    }
}
@PART[KKAOSS_Habitat_MK1_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IoncrossCrewSupport]
{
    MODULE
    {
		name = IonModuleCrewSupport
    }

    RESOURCE
    {
		name = Oxygen
		amount = 6800
		maxAmount = 6800
    }

    RESOURCE
    {
		name = CarbonDioxide
		amount = 0
		maxAmount = 800
    }
}
//---------------------Snacks------------------------
@PART[KKAOSS_Greenhouse_g]:FOR[PlanetarySurfaceStructures]:NEEDS[Snacks]:HAS[!MODULE[PlanetaryGreenhouse]]
{
    MODULE
    {
        name = PlanetaryGreenhouse
        ConverterName = Cultivation
        StartActionName = Start Farming
        StopActionName = Stop Farming
        AutoShutdown = false
        GeneratesHeat = false
         
         INPUT_RESOURCE
         {
            ResourceName = Ore
            Ratio = 0.5
            FlowMode = STAGE_PRIORITY_FLOW
         }
         INPUT_RESOURCE
         {
            ResourceName = ElectricCharge
            Ratio = 3
         }
         OUTPUT_RESOURCE
         {
            ResourceName = Snacks
            Ratio = 1
            DumpExcess = false
            FlowMode = STAGE_PRIORITY_FLOW
         }
    }
}

@PART[KKAOSS_Habitat_MK2_g]:FOR[PlanetarySurfaceStructures]:NEEDS[Snacks]:AFTER[Snacks]
{
    !RESOURCE[Snacks]{}
    RESOURCE
    {  
        name = Snacks  
        amount = 250  
        maxAmount = 250
    }
}
@PART[KKAOSS_Habitat_MK1_g]:FOR[PlanetarySurfaceStructures]:NEEDS[Snacks]:AFTER[Snacks]
{   
    !RESOURCE[Snacks]{}
    RESOURCE
    {  
        name = Snacks  
        amount = 200  
        maxAmount = 200
    }
}
//---------------------IFI-Life Support------------------------
@PART[KKAOSS_Greenhouse_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IFILifeSupport]:HAS[!MODULE[PlanetaryGreenhouse]]
{
    //conversion rate of 10:1 for Ore -> Life Support
    MODULE
    {
        name = PlanetaryGreenhouse
        ConverterName = Cultivation
        StartActionName = Start Farming
        StopActionName = Stop Farming
        AutoShutdown = false
        GeneratesHeat = false
         
         INPUT_RESOURCE
         {
            ResourceName = Ore
            Ratio = 0.00371
         }
         INPUT_RESOURCE
         {
            ResourceName = ElectricCharge
            Ratio = 0.5     //10800 per day
         }
         OUTPUT_RESOURCE
         {
            ResourceName = LifeSupport
            Ratio = 0.000371      //A bit more than for 8 Kerbals
            DumpExcess = false
         }
    }
}

@PART[KKAOSS_Habitat_MK2_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IFILifeSupport]:AFTER[IFILS]
{
    !RESOURCE[LifeSupport]{}
    RESOURCE
    {  
        name = LifeSupport  
        amount = 24  
        maxAmount = 24
    }
}
@PART[KKAOSS_Habitat_MK1_g]:FOR[PlanetarySurfaceStructures]:NEEDS[IFILifeSupport]:AFTER[IFILS]
{   
    !RESOURCE[LifeSupport]{}
    RESOURCE
    {  
        name = LifeSupport  
        amount = 18  
        maxAmount = 18
    }
}
//---------------------ECLSS------------------------
@PART[KKAOSS_Control_g]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = LifeSupportModule
	}

	RESOURCE
	{
		name = Oxygen
		amount = 800
		maxAmount = 800
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 800
	}

	RESOURCE
	{
		name = O2 Candle
		amount = 2
		maxAmount = 2
	}

	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}
}
@PART[KKAOSS_Cupola_g]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = LifeSupportModule
	}


	RESOURCE
	{
		name = Oxygen
		amount = 400
		maxAmount = 400
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 400
	}
    
    	RESOURCE
	{
		name = O2 Candle
		amount = 1
		maxAmount = 1
	}

	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}
}
@PART[KKAOSS_Science_g]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = LifeSupportModule
	}


	RESOURCE
	{
		name = Oxygen
		amount = 400
		maxAmount = 400
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 400
	}

    RESOURCE
	{
		name = O2 Candle
		amount = 2
		maxAmount = 2
	}
    
	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}
}
@PART[KKAOSS_gangway_airlock]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = LifeSupportModule
	}


	RESOURCE
	{
		name = Oxygen
		amount = 200
		maxAmount = 200
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 200
	}

	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}
}
@PART[KKAOSS_Greenhouse_g]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = PlanetaryGreenhouse
		ConverterName = Cultivation
		StartActionName = Start Farming
		StopActionName = Stop Farming
		AutoShutdown = false
		GeneratesHeat = false
		 
		 INPUT_RESOURCE
		 {
			ResourceName = CarbonDioxide
			Ratio = 0.04
		 }
		 INPUT_RESOURCE
		 {
			ResourceName = ElectricCharge
			Ratio = 1.00
		 }
		 OUTPUT_RESOURCE
		 {
			ResourceName = Oxygen
			Ratio = 0.038
			DumpExcess = false
		 }
	}
    
    MODULE
	{
		name = LifeSupportModule
	}

	RESOURCE
	{
		name = O2 Candle
		amount = 2
		maxAmount = 2
	}
    
	RESOURCE
	{
		name = Oxygen
		amount = 800
		maxAmount = 800
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 800
	}

	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}
}
@PART[KKAOSS_Habitat_MK2_g]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = LifeSupportModule
	}

	RESOURCE
	{
		name = Oxygen
		amount = 2000
		maxAmount = 2000
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 2000
	}

	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}

	RESOURCE
	{
		name = O2 Candle
		amount = 5
		maxAmount = 5
	}
}
@PART[KKAOSS_Habitat_MK1_g]:FOR[PlanetarySurfaceStructures]:NEEDS[LifeSupport]
{
	MODULE
	{
		name = LifeSupportModule
	}

	RESOURCE
	{
		name = Oxygen
		amount = 1600
		maxAmount = 1600
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 1600
	}

	MODULE
	{
		name = TankPriorityModule
		Priority = 10
	}

	RESOURCE
	{
		name = O2 Candle
		amount = 4
		maxAmount = 4
	}
}
